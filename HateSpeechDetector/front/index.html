<!-- frontend/index.html -->
<!DOCTYPE html>
<html>
  <head>
    <title>Detectar Discurso de Odio</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        textarea { width: 100%; height: 100px; margin: 10px 0; }
        button { background-color: #4CAF50; color: white; padding: 10px 20px; border: none; cursor: pointer; }
        .result { margin: 20px 0; padding: 15px; border-radius: 5px; }
        .hate { background-color: #ffcccc; border: 2px solid #ff0000; }
        .safe { background-color: #ccffcc; border: 2px solid #00cc00; }
    </style>
  </head>
  <body>
    <h1>Detectar Discurso de Odio en Español</h1>
    <textarea id="textInput" placeholder="Ingresa el texto a analizar..."></textarea>
    <button onclick="analyzeText()">Analizar</button>
    <div id="result" class="result" style="display: none;"></div>

    <script>
      async function analyzeText() {
        const text = document.getElementById('textInput').value;
        const resultDiv = document.getElementById('result');
        
        try {    // Para hacer esto es necesario habilitar CORS en FastAPI
          const response = await fetch('http://localhost:61616/predict', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ text: text })
          });
          
          const data = await response.json();
          resultDiv.style.display = 'block';
          resultDiv.className = `result ${data.is_hate_speech ? 'hate' : 'safe'}`;
          
          if (data.is_hate_speech) {
            resultDiv.innerHTML = `<strong>⚠️ DISCURSO DE ODIO DETECTADO</strong><br>
                                  Confianza: ${(data.score * 100).toFixed(2)}%<br>
                                  Etiqueta: ${data.label}`;
          } else {
            resultDiv.innerHTML = `<strong>✅ TEXTO SEGURO</strong><br>
                                  Confianza: ${(data.score * 100).toFixed(2)}%<br>
                                  Etiqueta: ${data.label}`;
          }
        } catch (error) {
          resultDiv.style.display = 'block';
          resultDiv.className = 'result';
          resultDiv.innerHTML = `<strong>Error:</strong> ${error.message}`;
        }
      }
    </script>
  </body>
</html>